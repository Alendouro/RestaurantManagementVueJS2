{"remainingRequest":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/babel-loader/lib/index.js!/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/src/pages/Waiter/OrdersWaiter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/src/pages/Waiter/OrdersWaiter.vue","mtime":1545828045915},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TablesAPI from \"../../packages/api/Tables.js\";\nimport MealsAPI from \"../../packages/api/Meals.js\";\nimport ItemsAPI from \"../../packages/api/Items.js\";\nimport OrderAPI from \"../../packages/api/Orders.js\";\nimport toastr from 'toastr';\nimport _ from 'lodash';\nexport default {\n  data: function data() {\n    return {\n      user: [],\n      orders: {\n        confirmed: [],\n        pending: [],\n        prepared: []\n      }\n    };\n  },\n  methods: {\n    getMyOrders: function getMyOrders(filters) {\n      var _this = this;\n\n      OrderAPI.getMyOrders(filters).then(function (orders) {\n        if (orders) {\n          orders.data.forEach(function (e, i) {\n            if (e.state === \"confirmed\") {\n              _this.orders.confirmed.push(e);\n            }\n\n            if (e.state === \"pending\") {\n              _this.orders.pending.push(e);\n            }\n\n            if (e.state === \"prepared\") {\n              _this.orders.prepared.push(e);\n            }\n          });\n        }\n      });\n    },\n    markOrderAsDelivered: function markOrderAsDelivered(orderID) {\n      var _this2 = this;\n\n      OrderAPI.updateOrderToDelivered(orderID).then(function () {\n        toastr.success('Order has been marked as delivered', 'Order delivered');\n\n        var prepared = _this2.orders.prepared.slice(); // cria copia do array sem mutar o original\n\n\n        _.remove(prepared, function (currentOrder) {\n          return currentOrder.id === orderID;\n        });\n\n        _this2.orders.prepared = prepared;\n      }).catch(function (error) {\n        if (error.response === 404) {\n          toastr.error('Record doesn\\'t doesnt exist', 'error');\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.getMyOrders(['pending', 'confirmed', 'prepared']);\n  }\n};",{"version":3,"sources":["OrdersWaiter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA,OAAA,SAAA,MAAA,8BAAA;AACA,OAAA,QAAA,MAAA,6BAAA;AACA,OAAA,QAAA,MAAA,6BAAA;AACA,OAAA,QAAA,MAAA,8BAAA;AACA,OAAA,MAAA,MAAA,QAAA;AACA,OAAA,CAAA,MAAA,QAAA;AAGA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,YAAA,EADA;AAEA,cAAA;AACA,mBAAA,EADA;AAEA,iBAAA,EAFA;AAGA,kBAAA;AAHA;AAFA,KAAA;AAQA,GAVA;AAWA,WAAA;AACA,eADA,uBACA,OADA,EACA;AAAA;;AACA,eAAA,WAAA,CAAA,OAAA,EAAA,IAAA,CAAA,kBAAA;AACA,YAAA,MAAA,EAAA;AACA,iBAAA,IAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA,CAAA,EAAA;AACA,gBAAA,EAAA,KAAA,KAAA,WAAA,EAAA;AACA,oBAAA,MAAA,CAAA,SAAA,CAAA,IAAA,CAAA,CAAA;AACA;;AAEA,gBAAA,EAAA,KAAA,KAAA,SAAA,EAAA;AACA,oBAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CAAA;AACA;;AAEA,gBAAA,EAAA,KAAA,KAAA,UAAA,EAAA;AACA,oBAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,CAAA;AACA;AACA,WAZA;AAaA;AACA,OAhBA;AAiBA,KAnBA;AAoBA,wBApBA,gCAoBA,OApBA,EAoBA;AAAA;;AACA,eAAA,sBAAA,CAAA,OAAA,EAAA,IAAA,CAAA,YAAA;AACA,eAAA,OAAA,CAAA,oCAAA,EAAA,iBAAA;;AAEA,YAAA,WAAA,OAAA,MAAA,CAAA,QAAA,CAAA,KAAA,EAAA,CAHA,CAGA;;;AAEA,UAAA,MAAA,CAAA,QAAA,EAAA,UAAA,YAAA,EAAA;AACA,iBAAA,aAAA,EAAA,KAAA,OAAA;AACA,SAFA;;AAIA,eAAA,MAAA,CAAA,QAAA,GAAA,QAAA;AACA,OAVA,EAUA,KAVA,CAUA,iBAAA;AACA,YAAA,MAAA,QAAA,KAAA,GAAA,EAAA;AACA,iBAAA,KAAA,CAAA,8BAAA,EAAA,OAAA;AACA;AACA,OAdA;AAeA;AApCA,GAXA;AAiDA,SAjDA,qBAiDA;AACA,SAAA,WAAA,CAAA,CAAA,SAAA,EAAA,WAAA,EAAA,UAAA,CAAA;AACA;AAnDA,CAAA","sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"md-layout\">\n      <div class=\"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-100\">\n        <md-card>\n          <md-card-header data-background-color=\"green\">\n            <h4 class=\"title\">Orders (Prepared)</h4>\n            <p class=\"category\">Here you can see your prepared orders</p>\n          </md-card-header>\n          <md-card-content>\n            <table class=\"table\">\n              <thead>\n              <tr>\n                <th>Table</th>\n                <th>Item</th>\n                <th>Price</th>\n                <th>Time</th>\n                <th><md-icon>border_color</md-icon></th>\n              </tr>\n              </thead>\n              <tbody>\n              <tr v-for=\"orderPrepared in orders.prepared\" :key=\"orderPrepared.id\" class=\"bg-warning text-white\">\n                <td class=\"pt-4\">{{ orderPrepared.meal.table_number }}</td>\n                <td class=\"pt-4\">{{ orderPrepared.item.name }}</td>\n                <td class=\"pt-4\">{{ orderPrepared.item.price }}</td>\n                <td class=\"pt-4\">{{ orderPrepared.item.created_at }}</td>\n                <td><md-button class=\"m-0\" @click=\"markOrderAsDelivered(orderPrepared.id)\">DELIVERED</md-button></td>\n              </tr>\n              </tbody>\n            </table>\n          </md-card-content>\n        </md-card>\n        <md-card>\n          <md-card-header data-background-color=\"green\">\n            <h4 class=\"title\">Orders (Pending - Confirmed)</h4>\n            <p class=\"category\">Here you can see your pending and confirmed orders</p>\n          </md-card-header>\n          <md-card-content>\n            <table class=\"table\">\n              <thead>\n              <tr>\n                <th>Table</th>\n                <th>Item</th>\n                <th>Price</th>\n                <th>Time</th>\n              </tr>\n              </thead>\n              <tbody>\n              <tr v-for=\"orderConfirmed in orders.confirmed\" :key=\"orderConfirmed.id\" class=\"bg-success text-white\">\n                <td>{{ orderConfirmed.meal.table_number }}</td>\n                <td>{{ orderConfirmed.item.name }}</td>\n                <td>{{ orderConfirmed.item.price }}</td>\n                <td>{{ orderConfirmed.item.created_at }}</td>\n                <md-tooltip md-direction=\"top\">Confirmed</md-tooltip>\n              </tr>\n              <tr v-for=\"orderPending in orders.pending\" :key=\"orderPending.id\" class=\"bg-info text-white\">\n                <td>{{ orderPending.meal.table_number }}</td>\n                <td>{{ orderPending.item.name }}</td>\n                <td>{{ orderPending.item.price }}</td>\n                <td>{{ orderPending.item.created_at }}</td>\n                <md-tooltip md-direction=\"top\">Pending</md-tooltip>\n              </tr>\n              </tbody>\n            </table>\n          </md-card-content>\n        </md-card>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n\nimport TablesAPI from \"../../packages/api/Tables.js\";\nimport MealsAPI from \"../../packages/api/Meals.js\";\nimport ItemsAPI from \"../../packages/api/Items.js\";\nimport OrderAPI from \"../../packages/api/Orders.js\";\nimport toastr from 'toastr';\nimport _ from 'lodash';\n\n\nexport default {\n  data() {\n    return {\n      user: [],\n      orders: {\n        confirmed: [],\n        pending: [],\n        prepared: []\n      }\n    };\n  },\n  methods: {\n    getMyOrders(filters){\n      OrderAPI.getMyOrders(filters).then(orders => {\n        if(orders){\n          orders.data.forEach((e,i) =>  {\n            if(e.state === \"confirmed\"){\n              this.orders.confirmed.push(e);\n            }\n\n            if(e.state === \"pending\"){\n              this.orders.pending.push(e);\n            }\n\n            if(e.state === \"prepared\"){\n              this.orders.prepared.push(e);\n            }\n          });\n        }\n      });\n    },\n    markOrderAsDelivered(orderID){\n      OrderAPI.updateOrderToDelivered(orderID).then(() => {\n        toastr.success('Order has been marked as delivered', 'Order delivered');\n\n        const prepared = this.orders.prepared.slice(); // cria copia do array sem mutar o original\n\n        _.remove(prepared, (currentOrder) => {\n          return currentOrder.id === orderID;\n        });\n\n        this.orders.prepared = prepared;\n      }).catch(error => {\n        if(error.response === 404){\n          toastr.error('Record doesn\\'t doesnt exist', 'error');\n        }\n      });\n    }\n  },\n  created(){\n    this.getMyOrders(['pending', 'confirmed', 'prepared']);\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped> \n</style>\n"],"sourceRoot":"src/pages/Waiter"}]}