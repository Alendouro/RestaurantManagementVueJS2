{"remainingRequest":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/babel-loader/lib/index.js!/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/src/pages/Cook/CookOrdersConfirmed.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/src/pages/Cook/CookOrdersConfirmed.vue","mtime":1546771133997},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport OrdersAPI from '../../packages/api/Orders.js';\nimport swal from 'sweetalert';\nimport { PendingOrders } from \"@/pages\";\nexport default {\n  name: \"cook-orders-confirmed\",\n  data: function data() {\n    return {\n      orders: [],\n      pagination: {},\n      user: [],\n      backGroundColor: \"green\"\n    };\n  },\n  methods: {\n    fetchItems: function fetchItems(pageUrl) {\n      var _this = this;\n\n      this.axios.defaults.headers.common.Authorization = \"Bearer \" + this.$store.state.token; //Get orders of cook\n\n      OrdersAPI.getItems(pageUrl || '/api/orders/' + this.user.id + '/confirmed' + '?paginate').then(function (orders) {\n        // Fill the items with the data received from API\n        _this.orders = orders.data;\n      }).catch(function (error) {\n        if (error) {\n          swal(' ', 'There was an error while processing the request');\n        }\n      });\n    },\n    updateState: function updateState(order) {\n      var _this2 = this;\n\n      OrdersAPI.changeState('/api/orders/changeState/' + order.id).then(function (response) {\n        _this2.$socket.emit('order_changed', response.data.order);\n      });\n    },\n    getOrderChanged: function getOrderChanged(order) {\n      for (var idx in this.orders) {\n        if (this.orders[idx].id == order.id) {\n          if (this.orders[idx].id != \"confirmed\") {\n            this.orders.splice(idx, 1);\n          } else {\n            return this.orders[idx];\n          }\n        }\n      }\n\n      if (order.state == \"confirmed\") {\n        return order;\n      }\n\n      return null;\n    }\n  },\n  sockets: {\n    order_changed: function order_changed(orderChanged) {\n      var refToChangedOrder = this.getOrderChanged(orderChanged);\n\n      if (refToChangedOrder !== null) {\n        this.orders.push(orderChanged);\n      }\n    }\n  },\n  created: function created() {\n    this.user = this.$store.state.user;\n    this.fetchItems();\n  }\n};",{"version":3,"sources":["CookOrdersConfirmed.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAcA,OAAA,SAAA,MAAA,8BAAA;AACA,OAAA,IAAA,MAAA,YAAA;AACA,SAAA,aAAA,QAAA,SAAA;AAEA,eAAA;AACA,QAAA,uBADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,cAAA,EADA;AAEA,kBAAA,EAFA;AAGA,YAAA,EAHA;AAIA,uBAAA;AAJA,KAAA;AAMA,GATA;AAWA,WAAA;AACA,cADA,sBACA,OADA,EACA;AAAA;;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,CAAA,aAAA,GAAA,YAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CADA,CAEA;;AACA,gBAAA,QAAA,CAAA,WAAA,iBAAA,KAAA,IAAA,CAAA,EAAA,GAAA,YAAA,GAAA,WAAA,EACA,IADA,CACA,kBAAA;AACA;AACA,cAAA,MAAA,GAAA,OAAA,IAAA;AACA,OAJA,EAKA,KALA,CAKA,iBAAA;AACA,YAAA,KAAA,EAAA;AACA,eAAA,GAAA,EAAA,iDAAA;AACA;AACA,OATA;AAUA,KAdA;AAeA,eAfA,uBAeA,KAfA,EAeA;AAAA;;AACA,gBAAA,WAAA,CAAA,6BAAA,MAAA,EAAA,EAAA,IAAA,CAAA,oBAAA;AACA,eAAA,OAAA,CAAA,IAAA,CAAA,eAAA,EAAA,SAAA,IAAA,CAAA,KAAA;AACA,OAFA;AAGA,KAnBA;AAoBA,qBAAA,yBAAA,KAAA,EAAA;AACA,WAAA,IAAA,GAAA,IAAA,KAAA,MAAA,EAAA;AACA,YAAA,KAAA,MAAA,CAAA,GAAA,EAAA,EAAA,IAAA,MAAA,EAAA,EAAA;AACA,cAAA,KAAA,MAAA,CAAA,GAAA,EAAA,EAAA,IAAA,WAAA,EAAA;AACA,iBAAA,MAAA,CAAA,MAAA,CAAA,GAAA,EAAA,CAAA;AACA,WAFA,MAGA;AACA,mBAAA,KAAA,MAAA,CAAA,GAAA,CAAA;AACA;AACA;AACA;;AACA,UAAA,MAAA,KAAA,IAAA,WAAA,EAAA;AACA,eAAA,KAAA;AACA;;AACA,aAAA,IAAA;AACA;AAnCA,GAXA;AAgDA,WAAA;AACA,iBADA,yBACA,YADA,EACA;AACA,UAAA,oBAAA,KAAA,eAAA,CAAA,YAAA,CAAA;;AACA,UAAA,sBAAA,IAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,YAAA;AACA;AACA;AANA,GAhDA;AAwDA,SAxDA,qBAwDA;AACA,SAAA,IAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA;AACA,SAAA,UAAA;AACA;AA3DA,CAAA","sourcesContent":["<template>\n<md-table md-card>\n      <md-table-toolbar data-background-color=\"orange\">\n        <h1 class=\"md-title\">Confirmed</h1>\n      </md-table-toolbar>\n\n      <md-table-row slot=\"md-table-row\" v-for=\"order in orders\" :key=\"order.id\">\n        <md-table-cell md-label=\"Name\">{{ order.item.name }}</md-table-cell>\n        <md-table-cell md-label=\"State\">{{ order.state }}</md-table-cell>\n        <md-button class=\"md-raised md-primary\" data-background-color=\"orange\" @click=\"updateState(order)\">Change state</md-button>\n      </md-table-row>\n    </md-table>\n</template>\n<script>\nimport OrdersAPI from '../../packages/api/Orders.js';\nimport swal from 'sweetalert';\nimport { PendingOrders } from \"@/pages\";\n\nexport default {\n  name: \"cook-orders-confirmed\",\n  data() {\n    return {\n      orders: [],\n      pagination: {},\n      user: [],\n      backGroundColor: \"green\",\n    };\n  },\n\n  methods: {\n    fetchItems(pageUrl) {\n      this.axios.defaults.headers.common.Authorization = \"Bearer \" + this.$store.state.token;\n      //Get orders of cook\n      OrdersAPI.getItems(pageUrl || '/api/orders/' + this.user.id + '/confirmed' + '?paginate')\n        .then(orders => {\n          // Fill the items with the data received from API\n          this.orders = orders.data;\n        })\n        .catch(error => {\n          if (error){\n            swal(' ', 'There was an error while processing the request');\n          }\n        });\n    },\n    updateState(order){\n      OrdersAPI.changeState('/api/orders/changeState/' + order.id).then(response =>{\n        this.$socket.emit('order_changed', response.data.order);\n      })\n    },\n    getOrderChanged: function(order){\n      for (let idx in this.orders) {\n          if (this.orders[idx].id == order.id){\n            if (this.orders[idx].id != \"confirmed\"){\n              this.orders.splice(idx, 1);\n            }\n            else {\n              return this.orders[idx];\n            }\n          } \n        }\n        if (order.state == \"confirmed\"){\n          return order;\n        }\n        return null;\n\t  },\n  },\n  sockets: {\n    order_changed(orderChanged){\n      let refToChangedOrder = this.getOrderChanged(orderChanged);\n      if (refToChangedOrder !== null) {\n          this.orders.push(orderChanged);\n      }\n    },\n  },        \t\n  created(){\n    this.user = this.$store.state.user;\n    this.fetchItems();   \n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped> \n\n</style>\n"],"sourceRoot":"src/pages/Cook"}]}