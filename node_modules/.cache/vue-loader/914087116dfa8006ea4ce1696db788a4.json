{"remainingRequest":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/src/pages/Waiter/OrdersWaiter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/src/pages/Waiter/OrdersWaiter.vue","mtime":1545828045915},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alendouro/WebDevelopment/RestaurantManagementVueJS2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport TablesAPI from \"../../packages/api/Tables.js\";\nimport MealsAPI from \"../../packages/api/Meals.js\";\nimport ItemsAPI from \"../../packages/api/Items.js\";\nimport OrderAPI from \"../../packages/api/Orders.js\";\nimport toastr from 'toastr';\nimport _ from 'lodash';\n\n\nexport default {\n  data() {\n    return {\n      user: [],\n      orders: {\n        confirmed: [],\n        pending: [],\n        prepared: []\n      }\n    };\n  },\n  methods: {\n    getMyOrders(filters){\n      OrderAPI.getMyOrders(filters).then(orders => {\n        if(orders){\n          orders.data.forEach((e,i) =>  {\n            if(e.state === \"confirmed\"){\n              this.orders.confirmed.push(e);\n            }\n\n            if(e.state === \"pending\"){\n              this.orders.pending.push(e);\n            }\n\n            if(e.state === \"prepared\"){\n              this.orders.prepared.push(e);\n            }\n          });\n        }\n      });\n    },\n    markOrderAsDelivered(orderID){\n      OrderAPI.updateOrderToDelivered(orderID).then(() => {\n        toastr.success('Order has been marked as delivered', 'Order delivered');\n\n        const prepared = this.orders.prepared.slice(); // cria copia do array sem mutar o original\n\n        _.remove(prepared, (currentOrder) => {\n          return currentOrder.id === orderID;\n        });\n\n        this.orders.prepared = prepared;\n      }).catch(error => {\n        if(error.response === 404){\n          toastr.error('Record doesn\\'t doesnt exist', 'error');\n        }\n      });\n    }\n  },\n  created(){\n    this.getMyOrders(['pending', 'confirmed', 'prepared']);\n  },\n};\n",{"version":3,"sources":["OrdersWaiter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OrdersWaiter.vue","sourceRoot":"src/pages/Waiter","sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"md-layout\">\n      <div class=\"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-100\">\n        <md-card>\n          <md-card-header data-background-color=\"green\">\n            <h4 class=\"title\">Orders (Prepared)</h4>\n            <p class=\"category\">Here you can see your prepared orders</p>\n          </md-card-header>\n          <md-card-content>\n            <table class=\"table\">\n              <thead>\n              <tr>\n                <th>Table</th>\n                <th>Item</th>\n                <th>Price</th>\n                <th>Time</th>\n                <th><md-icon>border_color</md-icon></th>\n              </tr>\n              </thead>\n              <tbody>\n              <tr v-for=\"orderPrepared in orders.prepared\" :key=\"orderPrepared.id\" class=\"bg-warning text-white\">\n                <td class=\"pt-4\">{{ orderPrepared.meal.table_number }}</td>\n                <td class=\"pt-4\">{{ orderPrepared.item.name }}</td>\n                <td class=\"pt-4\">{{ orderPrepared.item.price }}</td>\n                <td class=\"pt-4\">{{ orderPrepared.item.created_at }}</td>\n                <td><md-button class=\"m-0\" @click=\"markOrderAsDelivered(orderPrepared.id)\">DELIVERED</md-button></td>\n              </tr>\n              </tbody>\n            </table>\n          </md-card-content>\n        </md-card>\n        <md-card>\n          <md-card-header data-background-color=\"green\">\n            <h4 class=\"title\">Orders (Pending - Confirmed)</h4>\n            <p class=\"category\">Here you can see your pending and confirmed orders</p>\n          </md-card-header>\n          <md-card-content>\n            <table class=\"table\">\n              <thead>\n              <tr>\n                <th>Table</th>\n                <th>Item</th>\n                <th>Price</th>\n                <th>Time</th>\n              </tr>\n              </thead>\n              <tbody>\n              <tr v-for=\"orderConfirmed in orders.confirmed\" :key=\"orderConfirmed.id\" class=\"bg-success text-white\">\n                <td>{{ orderConfirmed.meal.table_number }}</td>\n                <td>{{ orderConfirmed.item.name }}</td>\n                <td>{{ orderConfirmed.item.price }}</td>\n                <td>{{ orderConfirmed.item.created_at }}</td>\n                <md-tooltip md-direction=\"top\">Confirmed</md-tooltip>\n              </tr>\n              <tr v-for=\"orderPending in orders.pending\" :key=\"orderPending.id\" class=\"bg-info text-white\">\n                <td>{{ orderPending.meal.table_number }}</td>\n                <td>{{ orderPending.item.name }}</td>\n                <td>{{ orderPending.item.price }}</td>\n                <td>{{ orderPending.item.created_at }}</td>\n                <md-tooltip md-direction=\"top\">Pending</md-tooltip>\n              </tr>\n              </tbody>\n            </table>\n          </md-card-content>\n        </md-card>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n\nimport TablesAPI from \"../../packages/api/Tables.js\";\nimport MealsAPI from \"../../packages/api/Meals.js\";\nimport ItemsAPI from \"../../packages/api/Items.js\";\nimport OrderAPI from \"../../packages/api/Orders.js\";\nimport toastr from 'toastr';\nimport _ from 'lodash';\n\n\nexport default {\n  data() {\n    return {\n      user: [],\n      orders: {\n        confirmed: [],\n        pending: [],\n        prepared: []\n      }\n    };\n  },\n  methods: {\n    getMyOrders(filters){\n      OrderAPI.getMyOrders(filters).then(orders => {\n        if(orders){\n          orders.data.forEach((e,i) =>  {\n            if(e.state === \"confirmed\"){\n              this.orders.confirmed.push(e);\n            }\n\n            if(e.state === \"pending\"){\n              this.orders.pending.push(e);\n            }\n\n            if(e.state === \"prepared\"){\n              this.orders.prepared.push(e);\n            }\n          });\n        }\n      });\n    },\n    markOrderAsDelivered(orderID){\n      OrderAPI.updateOrderToDelivered(orderID).then(() => {\n        toastr.success('Order has been marked as delivered', 'Order delivered');\n\n        const prepared = this.orders.prepared.slice(); // cria copia do array sem mutar o original\n\n        _.remove(prepared, (currentOrder) => {\n          return currentOrder.id === orderID;\n        });\n\n        this.orders.prepared = prepared;\n      }).catch(error => {\n        if(error.response === 404){\n          toastr.error('Record doesn\\'t doesnt exist', 'error');\n        }\n      });\n    }\n  },\n  created(){\n    this.getMyOrders(['pending', 'confirmed', 'prepared']);\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped> \n</style>\n"]}]}